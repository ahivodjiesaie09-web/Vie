<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Formulaire Intelligent + Admin S√©curis√©</title>
<style>
  body { font-family: Arial, sans-serif; background: #0d0d0d; color: white; margin:0; padding:0; display:flex; flex-direction:column; align-items:center; }
  header { background:#111; width:100%; padding:15px; text-align:center; font-size:1.5rem; }
  section { background:#1c1c1c; padding:20px; margin:20px; border-radius:12px; width:90%; max-width:700px; box-shadow:0 0 15px rgba(0,0,0,0.5); }
  input, textarea { width:100%; padding:10px; margin:5px 0; border-radius:6px; border:none; }
  button { padding:10px 20px; background:#4cafef; border:none; border-radius:8px; cursor:pointer; margin-top:10px; }
  table { width:100%; border-collapse: collapse; margin-top:10px; color:white; }
  th, td { border:1px solid white; padding:8px; text-align:left; }
  tr:nth-child(even) { background: rgba(255,255,255,0.05); }
  .hidden { display:none; }
  #notify { background: #4caf50; padding:10px; margin:10px 0; border-radius:6px; display:none; }
  #searchInput { margin-bottom:10px; padding:8px; width:100%; border-radius:6px; border:none; }
  #adminButton { position:fixed; bottom:10px; right:10px; background:#ff5722; padding:10px 15px; border:none; border-radius:50%; cursor:pointer; }
</style>
</head>
<body>
<header>Formulaire Intelligent + Admin S√©curis√©</header>

<section id="formSection">
  <h2>Bienvenue !</h2>
  <p>Entrez vos informations :</p>
  <input type="text" id="firstName" placeholder="Pr√©nom" required>
  <input type="text" id="lastName" placeholder="Nom" required>
  <button onclick="startQuestions()">Commencer</button>
</section>

<section id="questionsSection" class="hidden">
  <h2>R√©pondez aux questions :</h2>
  <div id="questionsContainer"></div>
  <button onclick="submitAnswers()">Envoyer</button>
</section>

<section id="adminSection" class="hidden">
  <h2>Admin - Voir toutes les r√©ponses</h2>
  <div id="notify">Nouvelle r√©ponse re√ßue !</div>
  <input type="text" id="searchInput" placeholder="Rechercher par nom..." class="hidden" oninput="filterTable()">
  <table id="adminTable" class="hidden">
    <thead>
      <tr><th>Pr√©nom</th><th>Nom</th><th>Q1</th><th>Q2</th><th>Q3</th><th>Q4</th><th>Action</th></tr>
    </thead>
    <tbody></tbody>
  </table>
</section>

<button id="adminButton" onclick="accessAdmin()">üîí</button>

<script>
  const ADMIN_PASSWORD = "1234";
  const responses = [];
  const questions = [
    "Etes vous en couple ou celib ?",
    "Quelle est le nom de vortre partenaire ?",
    "O√π vous voyez-vous dans 5 ans ?",
    "Quel est votre plus grand d√©fi actuel ?"
  ];

  function startQuestions() {
    const firstName = document.getElementById('firstName').value.trim();
    const lastName = document.getElementById('lastName').value.trim();
    if (!firstName || !lastName) { alert("Veuillez entrer nom et pr√©nom"); return; }

    document.getElementById('formSection').classList.add('hidden');
    const container = document.getElementById('questionsContainer');
    container.innerHTML = '';
    questions.forEach((q, i) => {
      const p = document.createElement('p');
      p.innerText = `${i+1}. ${q}`;
      const textarea = document.createElement('textarea');
      textarea.id = `q${i+1}`;
      textarea.rows = 2;
      container.appendChild(p);
      container.appendChild(textarea);
    });
    document.getElementById('questionsSection').classList.remove('hidden');
  }

  function submitAnswers() {
    const firstName = document.getElementById('firstName').value.trim();
    const lastName = document.getElementById('lastName').value.trim();
    const answers = [];
    for(let i=1;i<=questions.length;i++){
      const ans = document.getElementById(`q${i}`).value.trim();
      if(!ans){ alert("Veuillez r√©pondre √† toutes les questions"); return; }
      answers.push(ans);
    }
    const response = {firstName,lastName,...answers.reduce((obj,val,i)=>{obj[`q${i+1}`]=val; return obj;}, {})};
    responses.push(response);
    alert("Merci ! Vos r√©ponses ont √©t√© enregistr√©es.");
    document.getElementById('questionsSection').classList.add('hidden');
    document.getElementById('formSection').classList.remove('hidden');
    notifyAdmin();
    questions.forEach((_,i)=>document.getElementById(`q${i+1}`).value='');
  }

  function notifyAdmin(){
    const notify = document.getElementById('notify');
    notify.style.display='block';
    setTimeout(()=>{notify.style.display='none';},3000);
  }

  function accessAdmin(){
    const pass = prompt("Entrez le mot de passe admin :");
    if(pass === ADMIN_PASSWORD){
      document.getElementById('adminSection').classList.remove('hidden');
      showAdminTable();
    } else {
      alert("Mot de passe incorrect");
    }
  }

  function showAdminTable(){
    const table = document.getElementById('adminTable');
    const tbody = table.querySelector('tbody');
    tbody.innerHTML='';
    responses.forEach((r,i)=>{
      const tr = document.createElement('tr');
      tr.innerHTML=`<td>${r.firstName}</td><td>${r.lastName}</td><td>${r.q1}</td><td>${r.q2}</td><td>${r.q3}</td><td>${r.q4}</td><td><button onclick='deleteResponse(${i})'>Supprimer</button></td>`;
      tbody.appendChild(tr);
    });
    table.classList.remove('hidden');
    document.getElementById('searchInput').classList.remove('hidden');
  }

  function deleteResponse(index){
    responses.splice(index,1);
    showAdminTable();
  }

  function filterTable(){
    const filter = document.getElementById('searchInput').value.toLowerCase();
    const tbody = document.querySelector('#adminTable tbody');
    Array.from(tbody.rows).forEach(row=>{
      row.style.display = row.cells[0].innerText.toLowerCase().includes(filter) || row.cells[1].innerText.toLowerCase().includes(filter) ? '' : 'none';
    });
  }
</script>
</body>
</html>